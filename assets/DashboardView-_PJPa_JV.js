import{_ as p,m as g,r as a,o as f,c as v,a as s,b as t,w as n,d as i}from"./index-Ch_FAl0d.js";import{M as k,m as V}from"./MessageToast-BTeyvyaf.js";var x={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_NAME:"emily-apitest",BASE_URL:"/VueHW7/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:r}=x,L={data(){return{isLoading:!1}},components:{MessageToast:k},methods:{...g(V,["pushMessage"]),checkAdmin(){this.axios.post(`${r}/api/user/check`).then(e=>{this.pushMessage({style:"success",title:"驗證身分成功",content:e.data.message})}).catch(e=>{this.pushMessage({style:"danger",title:"驗證身分失敗",content:e.response.data.message}),this.$router.push("/login")})},logout(){this.isLoading=!0,this.axios.post(`${r}/logout`).then(e=>{document.cookie="emilyToken=; expires=;",this.isLoading=!1,this.pushMessage({style:"success",title:"登出成功",content:e.data.message}),this.$router.push("/login")}).catch(e=>{this.pushMessage({style:"danger",title:"登出失敗",content:e.response.data.message})})}},created(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)emilyToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=e,this.checkAdmin()}},M={class:"container-fluid"},y={class:"row"},T={class:"col-2 bg-dark p-3",style:{height:"100vh"}},A={class:"nav flex-column nav-pills",role:"navbar"},R={class:"col-10 p-3",style:{height:"100vh"}},b={class:"container-fluid"},E={class:"text-end"};function $(e,c,w,I,d,l){const o=a("RouterLink"),u=a("VueLoading"),h=a("MessageToast"),_=a("RouterView");return f(),v("div",M,[s("div",y,[s("div",T,[s("ul",A,[s("li",null,[t(o,{to:"/",class:"nav-link fs-3 mb-2"},{default:n(()=>[i("Gamer Station")]),_:1})]),s("li",null,[t(o,{to:"/admin/products",class:"nav-link"},{default:n(()=>[i("產品列表")]),_:1})]),s("li",null,[t(o,{to:"/admin/orders",class:"nav-link"},{default:n(()=>[i("訂單列表")]),_:1})]),s("li",null,[t(o,{to:"/admin/coupons",class:"nav-link"},{default:n(()=>[i("優惠券列表")]),_:1})])])]),s("div",R,[s("div",b,[t(u,{active:d.isLoading},null,8,["active"]),t(h),s("div",E,[s("button",{class:"btn btn-outline-primary",onClick:c[0]||(c[0]=(...m)=>l.logout&&l.logout(...m))},"登出")]),t(_)])])])])}const D=p(L,[["render",$]]);export{D as default};
