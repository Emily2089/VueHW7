import{M as v}from"./bootstrap.esm-Ceob_0pG.js";import{_ as g,o as d,c as a,a as t,t as o,F as u,e as h,f as y,v as P,b as M,r as k,n as C,d as m,g as x}from"./index-DeUXExve.js";const T={props:{tempProduct:Object,addToCart:Function},data(){return{productModal:null,qty:1}},methods:{open(){this.qty=1,this.productModal.show()},close(){this.productModal.hide()}},mounted(){this.productModal=new v(this.$refs.modal)}},$={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},L={class:"modal-dialog modal-xl",role:"document"},I={class:"modal-content border-0"},E={class:"modal-header bg-dark text-white"},V={class:"modal-title",id:"exampleModalLabel"},U=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),A={class:"modal-body"},q={class:"row"},w={class:"col-sm-6"},N=["src"],S={class:"col-sm-6"},D={class:"badge bg-primary rounded-pill"},R=t("p",null,"遊戲特色：",-1),B={key:0,class:"h5"},F={key:1},O={class:"h6"},z={class:"h5 text-danger"},j={class:"input-group"},Q=["value"];function G(n,r,e,_,i,c){return d(),a("div",$,[t("div",L,[t("div",I,[t("div",E,[t("h5",V,[t("span",null,o(e.tempProduct.title),1)]),U]),t("div",A,[t("div",q,[t("div",w,[t("img",{class:"img-fluid",src:e.tempProduct.mainImg,alt:""},null,8,N)]),t("div",S,[t("span",D,o(e.tempProduct.category),1),t("p",null,"遊戲簡介："+o(e.tempProduct.intro),1),R,t("ul",null,[(d(!0),a(u,null,h(e.tempProduct.features,(l,s)=>(d(),a("li",{key:"feature"+s},o(l),1))),128))]),e.tempProduct.origin_price===e.tempProduct.price?(d(),a("div",B,o(e.tempProduct.price)+" 元",1)):(d(),a("div",F,[t("del",O,"原價 "+o(e.tempProduct.origin_price)+" 元",1),t("div",z,"現在只要 "+o(e.tempProduct.price)+" 元",1)])),t("div",null,[t("div",j,[y(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":r[0]||(r[0]=l=>i.qty=l)},[(d(),a(u,null,h(20,l=>t("option",{value:l,key:"qty"+l},o(l),9,Q)),64))],512),[[P,i.qty]]),t("button",{type:"button",class:"btn btn-primary",onClick:r[1]||(r[1]=l=>e.addToCart(e.tempProduct.id,i.qty))},"加入購物車")])])])])])])])],512)}const H=g(T,[["render",G]]);var J={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_NAME:"emily-apitest",BASE_URL:"/undefined/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:p,VITE_API_NAME:b}=J,K={data(){return{products:[],tempProduct:{},status:{addToCartLoading:"",cartQtyLoading:""},carts:{carts:{},total:0,final_total:0}}},components:{UserProductModal:H},methods:{getProducts(){this.axios.get(`${p}/api/${b}/products/all`).then(n=>{this.products=n.data.products}).catch(n=>alert(n.response.data.message))},openModal(n){this.tempProduct=n,this.$refs.userModal.open()},addToCart(n,r=1){const e={product_id:n,qty:r};this.status.addToCartLoading=n,this.axios.post(`${p}/api/${b}/cart`,{data:e}).then(()=>{this.status.addToCartLoading="",this.$refs.userModal.close()}).catch(_=>alert(_.response.data.message))}},mounted(){this.getProducts()}},W=t("h1",null,"產品列表",-1),X={class:"table align-middle"},Y=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),Z={style:{width:"200px"}},tt={key:0,class:"h5"},et={key:1},st={class:"h6"},ot={class:"h5 text-danger"},dt={class:"btn-group btn-group-sm"},at=["onClick"],nt=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),lt=["disabled","onClick"],it={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},rt=t("i",{class:"fas fa-spinner fa-pulse"},null,-1);function ct(n,r,e,_,i,c){const l=k("UserProductModal");return d(),a(u,null,[W,M(l,{"temp-product":i.tempProduct,"add-to-cart":c.addToCart,ref:"userModal"},null,8,["temp-product","add-to-cart"]),t("table",X,[Y,t("tbody",null,[(d(!0),a(u,null,h(i.products,s=>(d(),a("tr",{key:s.id},[t("td",Z,[t("div",{style:C([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s.mainImg})`}])},null,4)]),t("td",null,o(s.title),1),t("td",null,[s.origin_price===s.price?(d(),a("div",tt,o(s.price)+" 元",1)):(d(),a("div",et,[t("del",st,"原價 "+o(s.origin_price)+" 元",1),t("div",ot,"現在只要 "+o(s.price)+" 元",1)]))]),t("td",null,[t("div",dt,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:f=>c.openModal(s)},[nt,m(" 查看更多 ")],8,at),t("button",{type:"button",class:"btn btn-outline-danger",disabled:s.id===i.status.addToCartLoading,onClick:f=>c.addToCart(s.id)},[s.id===i.status.addToCartLoading?(d(),a("span",it)):x("",!0),rt,m(" 加到購物車 ")],8,lt)])])]))),128))])])],64)}const ht=g(K,[["render",ct]]);export{ht as default};
